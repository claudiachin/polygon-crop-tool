import{S as ke,i as Ie,s as Se,k as v,a as j,q as J,l as b,m as w,h as g,c as X,r as K,n as u,p as ie,b as ye,G as a,J as G,K as je,H as Pe,L as Ve,o as Xe,w as le,M as Ye,N as Te,y as Ue,z as Ae,O as Ce,A as Me,P as Ee,g as Oe,d as Re,B as Fe}from"../chunks/index.fe0b6a4a.js";function He(n){let i,s,f,k,o,l,F,L,c,p,T,e,m,D,y,S,E,U,B,z,N,d,I,V,Y,P,A,q,$,W,O,Q,ne,x,ee,R,se,fe,re,ge,Z,oe,me,ce,_e,we;return{c(){i=v("div"),s=v("div"),f=v("canvas"),k=j(),o=v("button"),l=v("span"),F=J("upload_file"),L=j(),c=v("h6"),p=J("Upload image"),e=j(),m=v("input"),D=j(),y=v("div"),S=v("button"),E=v("span"),U=J("crop"),z=j(),N=v("button"),d=v("span"),I=J("hexagon"),Y=j(),P=v("button"),A=v("span"),q=J("cleaning_services"),W=j(),O=v("button"),Q=v("span"),ne=J("undo"),ee=j(),R=v("button"),se=v("span"),fe=J("redo"),ge=j(),Z=v("button"),oe=v("span"),me=J("delete"),this.h()},l(te){i=b(te,"DIV",{class:!0,style:!0});var M=w(i);s=b(M,"DIV",{class:!0});var t=w(s);f=b(t,"CANVAS",{width:!0,height:!0,class:!0}),w(f).forEach(g),k=X(t),o=b(t,"BUTTON",{class:!0,style:!0});var r=w(o);l=b(r,"SPAN",{class:!0});var h=w(l);F=K(h,"upload_file"),h.forEach(g),L=X(r),c=b(r,"H6",{});var _=w(c);p=K(_,"Upload image"),_.forEach(g),r.forEach(g),e=X(t),m=b(t,"INPUT",{type:!0,accept:!0,class:!0}),t.forEach(g),D=X(M),y=b(M,"DIV",{class:!0});var C=w(y);S=b(C,"BUTTON",{class:!0,title:!0});var H=w(S);E=b(H,"SPAN",{class:!0});var de=w(E);U=K(de,"crop"),de.forEach(g),H.forEach(g),z=X(C),N=b(C,"BUTTON",{class:!0,title:!0});var ue=w(N);d=b(ue,"SPAN",{class:!0});var ae=w(d);I=K(ae,"hexagon"),ae.forEach(g),ue.forEach(g),Y=X(C),P=b(C,"BUTTON",{class:!0,title:!0});var ve=w(P);A=b(ve,"SPAN",{class:!0});var he=w(A);q=K(he,"cleaning_services"),he.forEach(g),ve.forEach(g),W=X(C),O=b(C,"BUTTON",{class:!0,title:!0});var pe=w(O);Q=b(pe,"SPAN",{class:!0});var be=w(Q);ne=K(be,"undo"),be.forEach(g),pe.forEach(g),ee=X(C),R=b(C,"BUTTON",{class:!0,title:!0});var De=w(R);se=b(De,"SPAN",{class:!0});var Ne=w(se);fe=K(Ne,"redo"),Ne.forEach(g),De.forEach(g),ge=X(C),Z=b(C,"BUTTON",{class:!0,title:!0});var Le=w(Z);oe=b(Le,"SPAN",{class:!0});var Be=w(oe);me=K(Be,"delete"),Be.forEach(g),Le.forEach(g),C.forEach(g),M.forEach(g),this.h()},h(){u(f,"width",n[0]),u(f,"height",n[1]),u(f,"class","hide svelte-upex30"),u(l,"class","material-icons-outlined svelte-upex30"),u(o,"class","upload-button svelte-upex30"),u(o,"style",T="width:"+n[0]+"px;height:"+n[1]+"px;"),u(m,"type","file"),u(m,"accept",".jpg, .jpeg, .png"),u(m,"class","hide svelte-upex30"),u(s,"class","canvas svelte-upex30"),u(E,"class","material-icons-outlined"),S.disabled=B=n[6]==null,u(S,"class","icon-button selected svelte-upex30"),u(S,"title","Rectangle Crop"),u(d,"class","material-icons-outlined"),N.disabled=V=n[6]==null,u(N,"class","icon-button svelte-upex30"),u(N,"title","Polygon Crop"),u(A,"class","material-icons-outlined"),P.disabled=$=n[7].length==0,u(P,"class","icon-button svelte-upex30"),u(P,"title","Reset"),u(Q,"class","material-icons-outlined"),O.disabled=x=n[7].length==0,u(O,"class","icon-button svelte-upex30"),u(O,"title","Undo"),u(se,"class","material-icons-outlined"),R.disabled=re=n[8].length==0,u(R,"class","icon-button svelte-upex30"),u(R,"title","Redo"),u(oe,"class","material-icons-outlined"),Z.disabled=ce=n[6]==null,u(Z,"class","icon-button svelte-upex30"),u(Z,"title","Delete"),u(y,"class","buttons svelte-upex30"),u(i,"class","section cropper-wrapper svelte-upex30"),ie(i,"--primary-color",n[2].primary),ie(i,"--secondary-color",n[2].secondary)},m(te,M){ye(te,i,M),a(i,s),a(s,f),n[21](f),a(s,k),a(s,o),a(o,l),a(l,F),a(o,L),a(o,c),a(c,p),n[24](o),a(s,e),a(s,m),n[25](m),a(i,D),a(i,y),a(y,S),a(S,E),a(E,U),n[27](S),a(y,z),a(y,N),a(N,d),a(d,I),n[29](N),a(y,Y),a(y,P),a(P,A),a(A,q),a(y,W),a(y,O),a(O,Q),a(Q,ne),a(y,ee),a(y,R),a(R,se),a(se,fe),a(y,ge),a(y,Z),a(Z,oe),a(oe,me),_e||(we=[G(f,"mousedown",n[22]),G(f,"mousemove",n[23]),G(o,"click",function(){je(n[3].click())&&n[3].click().apply(this,arguments)}),G(m,"change",n[26]),G(S,"click",n[28]),G(N,"click",n[30]),G(P,"click",n[16]),G(O,"click",n[14]),G(R,"click",n[15]),G(Z,"click",n[18])],_e=!0)},p(te,M){n=te,M[0]&1&&u(f,"width",n[0]),M[0]&2&&u(f,"height",n[1]),M[0]&3&&T!==(T="width:"+n[0]+"px;height:"+n[1]+"px;")&&u(o,"style",T),M[0]&64&&B!==(B=n[6]==null)&&(S.disabled=B),M[0]&64&&V!==(V=n[6]==null)&&(N.disabled=V),M[0]&128&&$!==($=n[7].length==0)&&(P.disabled=$),M[0]&128&&x!==(x=n[7].length==0)&&(O.disabled=x),M[0]&256&&re!==(re=n[8].length==0)&&(R.disabled=re),M[0]&64&&ce!==(ce=n[6]==null)&&(Z.disabled=ce),M[0]&4&&ie(i,"--primary-color",n[2].primary),M[0]&4&&ie(i,"--secondary-color",n[2].secondary)},i:Pe,o:Pe,d(te){te&&g(i),n[21](null),n[24](null),n[25](null),n[27](null),n[29](null),_e=!1,Ve(we)}}}function ze(n,i,s){let f,k,o,l,{cwidth:F}=i,{cheight:L}=i,{colours:c}=i,p,T,e=[],m=[],D=[],y=[],S="rectangle",E,U,{allCrops:B}=i,{filename:z}=i;Xe(()=>{l=o.getContext("2d"),T=document.getElementById("cropped-imgs")});function N(t){const r=new FileReader;r.addEventListener("load",function(h){var _=new Image;_.onload=function(){o.classList.remove("hide"),k.classList.add("hide"),s(5,o.height=o.width/p.width*p.height,o),l.drawImage(_,0,0,_.width,_.height,0,0,o.width,o.height),s(19,B=[...B,{cwidth:o.width,cheight:o.height}])},h.target&&typeof h.target.result=="string"&&(_.src=h.target.result),s(6,p=_)}),s(20,z=t.target.files[0].name.split(".")[0]),r.readAsDataURL(t.target.files[0])}function d(t){S=t,t=="rectangle"?(E.classList.add("selected"),U.classList.remove("selected")):(E.classList.remove("selected"),U.classList.add("selected")),O()}function I(t){S=="polygon"?V(t):S=="rectangle"?Y(t):console.log("error")}function V(t){t.preventDefault(),t.stopPropagation();let r=t.pageX-o.offsetLeft,h=t.pageY-o.offsetTop;if(S=="polygon"&&t.shiftKey&&e.length>0){let H=Math.abs(Math.atan2(h-e[e.length-1].y,r-e[e.length-1].x)*180/Math.PI);H>45&&H<135?s(7,e=[...e,{x:e[e.length-1].x,y:h}]):s(7,e=[...e,{x:r,y:e[e.length-1].y}])}else s(7,e=[...e,{x:r,y:h}]);if(s(8,D.length=0,D),s(8,D),m=[...m,"draw1"],P(),e.length>1){var _=r-e[0].x,C=h-e[0].y;_*_+C*C<10*10&&Q()}}function Y(t){t.preventDefault(),t.stopPropagation();let r=t.pageX-o.offsetLeft,h=t.pageY-o.offsetTop;if(e.length<2&&(e.length==0?(s(7,e=[...e,{x:r,y:h}]),m=[...m,"draw1"]):(s(7,e=[...e,{x:r,y:e[0].y},{x:r,y:h},{x:e[0].x,y:h}]),m=[...m,"draw3"]),P()),e.length>1){var _=r-e[0].x,C=h-e[0].y;_*_+C*C<10*10&&Q()}}function P(){if(l.drawImage(p,0,0,p.width,p.height,0,0,o.width,o.height),e.length>0){l.strokeStyle=c.primary,l.beginPath(),l.moveTo(e[0].x,e[0].y);for(var t=0;t<e.length;t++)l.lineTo(e[t].x,e[t].y);l.closePath(),l.fillStyle=c.primary+"50",l.fill(),l.stroke(),l.beginPath(),l.arc(e[0].x,e[0].y,10,0,Math.PI*2),l.closePath(),l.stroke()}}function A(){var t=m.pop();t=="draw3"?(q(),q(),q(),y=[...y,t]):(q(),y=[...y,t]),P()}function q(){var t=e.pop();s(7,e),s(8,D=[...D,t])}function $(){var t=y.pop();t=="draw3"?(W(),W(),W(),m=[...m,t]):(W(),m=[...m,t]),P()}function W(){var t=D.pop();s(8,D),s(7,e=[...e,t])}function O(){s(7,e.length=0,e),s(7,e=D),s(8,D.length=0,D),s(8,D),m.length=0,m=m,y.length=0,y=y,P()}function Q(){for(var t=1e4,r=1e4,h=-1e4,_=-1e4,C=1;C<e.length;C++){var H=e[C];H.x<t&&(t=H.x),H.y<r&&(r=H.y),H.x>h&&(h=H.x),H.y>_&&(_=H.y)}var de=h-t,ue=_-r;l.save(),l.clearRect(0,0,o.width,o.height),l.beginPath(),l.moveTo(e[0].x,e[0].y);for(var C=1;C<e.length;C++){var H=e[C];l.lineTo(e[C].x,e[C].y)}l.closePath(),l.clip(),l.drawImage(p,0,0,p.width,p.height,0,0,o.width,o.height),l.restore();var ae=document.createElement("canvas"),ve=ae.getContext("2d");ae.width=de,ae.height=ue,ve&&ve.drawImage(o,t,r,de,ue,0,0,de,ue);let he=0;if(T.children.length>0){let be=T.children[T.children.length-1].id.split("-");he=parseInt(be[be.length-1])+1}var pe=new Image;pe.onload=function(){T.appendChild(ne(pe,he))},pe.src=ae.toDataURL(),s(19,B=[...B,{id:he,base64:ae.toDataURL(),points:e.slice()}]),s(7,e.length=0,e),l.drawImage(p,0,0,p.width,p.height,0,0,o.width,o.height)}function ne(t,r){t.id="crop-"+r;let h=document.createElement("button");h.id="deleteBtn-"+r,h.classList.add("icon-button"),h.innerHTML='<span class="material-icons-outlined" id="minusIcon-'+r+'">do_not_disturb_on</span>',h.addEventListener("click",x);let _=document.createElement("div");return _.classList.add("cropped-img-div"),_.id="cropDiv-"+r,_.appendChild(t),_.appendChild(h),_}function x(t){let r=t.target.id.split("-"),h=r[r.length-1];B.splice(B.indexOf(B.find(C=>C.id==h)),1),s(19,B);let _=document.getElementById("cropDiv-"+h);_&&_.remove()}function ee(t){t.preventDefault(),t.stopPropagation();let r=t.pageX-o.offsetLeft,h=t.pageY-o.offsetTop;if(p&&(l.clearRect(0,0,o.width,o.height),l.drawImage(p,0,0,p.width,p.height,0,0,o.width,o.height),P()),S=="polygon"&&t.shiftKey&&e.length>0){let _=Math.abs(Math.atan2(h-e[e.length-1].y,r-e[e.length-1].x)*180/Math.PI);_>45&&_<135?(R(e[e.length-1].x,h),l.strokeStyle=c.primary,l.beginPath(),l.moveTo(e[e.length-1].x,e[e.length-1].y),l.lineTo(e[e.length-1].x,h),l.closePath(),l.stroke()):(R(r,e[e.length-1].y),l.strokeStyle=c.primary,l.beginPath(),l.moveTo(e[e.length-1].x,e[e.length-1].y),l.lineTo(r,e[e.length-1].y),l.closePath(),l.stroke())}else S=="polygon"&&e.length>0?(R(r,h),l.strokeStyle=c.primary,l.beginPath(),l.moveTo(e[e.length-1].x,e[e.length-1].y),l.lineTo(r,h),l.closePath(),l.stroke()):S=="rectangle"&&e.length==1?(R(r,h),l.strokeStyle=c.primary,l.beginPath(),l.moveTo(e[e.length-1].x,e[e.length-1].y),l.lineTo(e[e.length-1].x,h),l.lineTo(r,h),l.lineTo(r,e[e.length-1].y),l.closePath(),l.stroke()):R(r,h);se(r,h)}function R(t,r){l.strokeStyle=c.secondary,l.beginPath(),l.moveTo(t,0),l.lineTo(t,r-10),l.moveTo(t,r+10),l.lineTo(t,o.height),l.moveTo(0,r),l.lineTo(t-10,r),l.moveTo(t+10,r),l.lineTo(o.width,r),l.closePath(),l.stroke()}function se(t,r){l.fillStyle=c.tooltip;let h=10,_=10;t+10+76>o.width&&(h=-86),r+10+20>o.height&&(_=-30),l.fillRect(t+h,r+_,76,20),l.fillStyle=c.tooltip_text,l.font="normal 16px",l.fillText("x: "+t+", y: "+r,t+h+8,r+_+14)}function fe(){for(o.classList.add("hide"),k.classList.remove("hide"),s(3,f.value=null,f),s(19,B=[]),O(),s(6,p=void 0),s(20,z=void 0);T.firstChild;)T.removeChild(T.firstChild)}function re(t){le[t?"unshift":"push"](()=>{o=t,s(5,o)})}const ge=t=>I(t),Z=t=>ee(t);function oe(t){le[t?"unshift":"push"](()=>{k=t,s(4,k)})}function me(t){le[t?"unshift":"push"](()=>{f=t,s(3,f)})}const ce=t=>N(t);function _e(t){le[t?"unshift":"push"](()=>{E=t,s(9,E)})}const we=()=>d("rectangle");function te(t){le[t?"unshift":"push"](()=>{U=t,s(10,U)})}const M=()=>d("polygon");return n.$$set=t=>{"cwidth"in t&&s(0,F=t.cwidth),"cheight"in t&&s(1,L=t.cheight),"colours"in t&&s(2,c=t.colours),"allCrops"in t&&s(19,B=t.allCrops),"filename"in t&&s(20,z=t.filename)},[F,L,c,f,k,o,p,e,D,E,U,N,d,I,A,$,O,ee,fe,B,z,re,ge,Z,oe,me,ce,_e,we,te,M]}class Je extends ke{constructor(i){super(),Ie(this,i,ze,He,Se,{cwidth:0,cheight:1,colours:2,allCrops:19,filename:20},null,[-1,-1])}}function Ke(n){let i,s,f,k,o,l,F,L,c,p,T,e,m,D,y,S,E,U,B,z,N,d,I,V,Y;return{c(){i=v("div"),s=v("div"),f=v("h6"),k=J("Images cropped:"),o=j(),l=v("div"),F=j(),L=v("div"),c=v("button"),p=v("span"),T=J("save"),e=j(),m=v("p"),D=J("Save as .json"),S=j(),E=v("button"),U=v("span"),B=J("save"),z=j(),N=v("p"),d=J("Save as .png"),this.h()},l(P){i=b(P,"DIV",{class:!0,style:!0});var A=w(i);s=b(A,"DIV",{});var q=w(s);f=b(q,"H6",{});var $=w(f);k=K($,"Images cropped:"),$.forEach(g),o=X(q),l=b(q,"DIV",{id:!0,class:!0}),w(l).forEach(g),q.forEach(g),F=X(A),L=b(A,"DIV",{class:!0});var W=w(L);c=b(W,"BUTTON",{id:!0,title:!0,class:!0});var O=w(c);p=b(O,"SPAN",{class:!0});var Q=w(p);T=K(Q,"save"),Q.forEach(g),e=X(O),m=b(O,"P",{});var ne=w(m);D=K(ne,"Save as .json"),ne.forEach(g),O.forEach(g),S=X(W),E=b(W,"BUTTON",{id:!0,title:!0,class:!0});var x=w(E);U=b(x,"SPAN",{class:!0});var ee=w(U);B=K(ee,"save"),ee.forEach(g),z=X(x),N=b(x,"P",{});var R=w(N);d=K(R,"Save as .png"),R.forEach(g),x.forEach(g),W.forEach(g),A.forEach(g),this.h()},h(){u(l,"id","cropped-imgs"),u(l,"class","svelte-2nr1v"),u(p,"class","material-icons-outlined svelte-2nr1v"),c.disabled=y=n[0].length<=1,u(c,"id","save-json"),u(c,"title","Save"),u(c,"class","svelte-2nr1v"),u(U,"class","material-icons-outlined svelte-2nr1v"),E.disabled=I=n[0].length<=1,u(E,"id","save-imgs"),u(E,"title","Save"),u(E,"class","svelte-2nr1v"),u(L,"class","save-buttons svelte-2nr1v"),u(i,"class","section cropped-images-wrapper svelte-2nr1v"),ie(i,"--primary-color",n[1].primary),ie(i,"--secondary-color",n[1].secondary)},m(P,A){ye(P,i,A),a(i,s),a(s,f),a(f,k),a(s,o),a(s,l),a(i,F),a(i,L),a(L,c),a(c,p),a(p,T),a(c,e),a(c,m),a(m,D),a(L,S),a(L,E),a(E,U),a(U,B),a(E,z),a(E,N),a(N,d),V||(Y=[G(c,"click",n[3]),G(E,"click",n[2])],V=!0)},p(P,[A]){A&1&&y!==(y=P[0].length<=1)&&(c.disabled=y),A&1&&I!==(I=P[0].length<=1)&&(E.disabled=I),A&2&&ie(i,"--primary-color",P[1].primary),A&2&&ie(i,"--secondary-color",P[1].secondary)},i:Pe,o:Pe,d(P){P&&g(i),V=!1,Ve(Y)}}}function qe(n,i,s){let{allCrops:f}=i,{filename:k}=i,{colours:o}=i;function l(c,p){var T=document.createElement("a");T.setAttribute("href",c),T.setAttribute("download",k+"_crops"+p),T.style.display="none",document.body.appendChild(T),T.click(),document.body.removeChild(T)}function F(){for(const c of f.slice(1))l(c.base64,".png")}function L(){l("data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(f,null,"	")),".json")}return n.$$set=c=>{"allCrops"in c&&s(0,f=c.allCrops),"filename"in c&&s(4,k=c.filename),"colours"in c&&s(1,o=c.colours)},[f,o,F,L,k]}class We extends ke{constructor(i){super(),Ie(this,i,qe,Ke,Se,{allCrops:0,filename:4,colours:1})}}function Ge(n){let i,s,f,k,o,l,F,L,c,p,T,e,m,D,y;Ye(n[4]);function S(d){n[5](d)}function E(d){n[6](d)}let U={cwidth:"500",cheight:"750",colours:n[3]};n[0]!==void 0&&(U.allCrops=n[0]),n[1]!==void 0&&(U.filename=n[1]),s=new Je({props:U}),le.push(()=>Te(s,"allCrops",S)),le.push(()=>Te(s,"filename",E));function B(d){n[7](d)}function z(d){n[8](d)}let N={colours:n[3]};return n[0]!==void 0&&(N.allCrops=n[0]),n[1]!==void 0&&(N.filename=n[1]),l=new We({props:N}),le.push(()=>Te(l,"allCrops",B)),le.push(()=>Te(l,"filename",z)),{c(){i=v("div"),Ue(s.$$.fragment),o=j(),Ue(l.$$.fragment),c=j(),p=v("div"),T=v("p"),e=J("Seems like the screen is too small!"),this.h()},l(d){i=b(d,"DIV",{class:!0});var I=w(i);Ae(s.$$.fragment,I),o=X(I),Ae(l.$$.fragment,I),I.forEach(g),c=X(d),p=b(d,"DIV",{class:!0});var V=w(p);T=b(V,"P",{});var Y=w(T);e=K(Y,"Seems like the screen is too small!"),Y.forEach(g),V.forEach(g),this.h()},h(){u(i,"class","section main-body svelte-1dxd9r0"),Ce(i,"hide",n[2]<767),u(p,"class","section main-body svelte-1dxd9r0"),Ce(p,"hide",n[2]>767)},m(d,I){ye(d,i,I),Me(s,i,null),a(i,o),Me(l,i,null),ye(d,c,I),ye(d,p,I),a(p,T),a(T,e),m=!0,D||(y=G(window,"resize",n[4]),D=!0)},p(d,[I]){const V={};!f&&I&1&&(f=!0,V.allCrops=d[0],Ee(()=>f=!1)),!k&&I&2&&(k=!0,V.filename=d[1],Ee(()=>k=!1)),s.$set(V);const Y={};!F&&I&1&&(F=!0,Y.allCrops=d[0],Ee(()=>F=!1)),!L&&I&2&&(L=!0,Y.filename=d[1],Ee(()=>L=!1)),l.$set(Y),(!m||I&4)&&Ce(i,"hide",d[2]<767),(!m||I&4)&&Ce(p,"hide",d[2]>767)},i(d){m||(Oe(s.$$.fragment,d),Oe(l.$$.fragment,d),m=!0)},o(d){Re(s.$$.fragment,d),Re(l.$$.fragment,d),m=!1},d(d){d&&g(i),Fe(s),Fe(l),d&&g(c),d&&g(p),D=!1,y()}}}function Qe(n,i,s){let f=[],k,o={primary:"#FF6B6B",secondary:"#4ECDC4",tooltip:"#121212",tooltip_text:"#FFFFFF"},l;function F(){s(2,l=window.innerWidth)}function L(e){f=e,s(0,f)}function c(e){k=e,s(1,k)}function p(e){f=e,s(0,f)}function T(e){k=e,s(1,k)}return[f,k,l,o,F,L,c,p,T]}class xe extends ke{constructor(i){super(),Ie(this,i,Qe,Ge,Se,{})}}export{xe as component};
